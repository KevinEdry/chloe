{
  "event": "start",
  "hook_data": {
    "cwd": "/Users/kedry/RustroverProjects/.chloe/chloe-add-tui-name-and-version-to-footer-right-side",
    "hook_event_name": "PostToolUse",
    "permission_mode": "acceptEdits",
    "session_id": "78c1d51b-b2fd-4a00-90b3-0e1b0950a74b",
    "tool_input": {
      "file_path": "/Users/kedry/RustroverProjects/.chloe/chloe-add-tui-name-and-version-to-footer-right-side/src/worktree/tab_ui.rs",
      "new_string": "        }\n    };\n\n    let inner_area = Block::default().borders(Borders::ALL).inner(area);",
      "old_string": "        }\n    };\n\n    const VERSION_TEXT: &str = \"Chloe v0.1.0\";\n    const VERSION_TEXT_LENGTH: u16 = 13;\n    const MINIMUM_SPACE_FOR_VERSION: u16 = 15;\n\n    let inner_area = Block::default().borders(Borders::ALL).inner(area);"
    },
    "tool_name": "Edit",
    "tool_response": {
      "filePath": "/Users/kedry/RustroverProjects/.chloe/chloe-add-tui-name-and-version-to-footer-right-side/src/worktree/tab_ui.rs",
      "newString": "        }\n    };\n\n    let inner_area = Block::default().borders(Borders::ALL).inner(area);",
      "oldString": "        }\n    };\n\n    const VERSION_TEXT: &str = \"Chloe v0.1.0\";\n    const VERSION_TEXT_LENGTH: u16 = 13;\n    const MINIMUM_SPACE_FOR_VERSION: u16 = 15;\n\n    let inner_area = Block::default().borders(Borders::ALL).inner(area);",
      "originalFile": "use super::tab_state::{WorktreeMode, WorktreeTabState};\nuse ratatui::{\n    Frame,\n    layout::{Alignment, Constraint, Direction, Layout, Rect},\n    style::{Color, Modifier, Style},\n    text::{Line, Span},\n    widgets::{Block, Borders, List, ListItem, Paragraph},\n};\n\nconst STATUS_BAR_WIDTH_THRESHOLD: u16 = 100;\n\npub fn render(frame: &mut Frame, area: Rect, state: &WorktreeTabState) {\n    let chunks = Layout::default()\n        .direction(Direction::Vertical)\n        .constraints([Constraint::Min(0), Constraint::Length(3)])\n        .split(area);\n\n    render_worktree_list(frame, chunks[0], state);\n    render_status_bar(frame, chunks[1], state);\n\n    if let WorktreeMode::ConfirmDelete { worktree_index } = state.mode {\n        render_delete_confirmation(frame, area, state, worktree_index);\n    }\n}\n\nfn render_worktree_list(frame: &mut Frame, area: Rect, state: &WorktreeTabState) {\n    if let Some(error) = &state.error_message {\n        let error_text = Paragraph::new(error.as_str())\n            .style(Style::default().fg(Color::Red))\n            .alignment(Alignment::Center)\n            .block(\n                Block::default()\n                    .borders(Borders::ALL)\n                    .title(\"Git Worktrees - Error\")\n                    .border_style(Style::default().fg(Color::DarkGray)),\n            );\n\n        frame.render_widget(error_text, area);\n        return;\n    }\n\n    if state.worktrees.is_empty() {\n        let empty_text = Paragraph::new(\"No worktrees found.\")\n            .style(Style::default().fg(Color::Gray))\n            .alignment(Alignment::Center)\n            .block(\n                Block::default()\n                    .borders(Borders::ALL)\n                    .title(\"Git Worktrees\")\n                    .border_style(Style::default().fg(Color::DarkGray)),\n            );\n\n        frame.render_widget(empty_text, area);\n        return;\n    }\n\n    let items: Vec<ListItem> = state\n        .worktrees\n        .iter()\n        .enumerate()\n        .map(|(index, worktree)| {\n            let is_selected = state.selected_index == Some(index);\n\n            let branch_style = if worktree.is_detached {\n                Style::default().fg(Color::Yellow)\n            } else {\n                Style::default().fg(Color::Green)\n            };\n\n            let path_display = worktree.path.to_string_lossy().to_string();\n\n            let content = Line::from(vec![\n                Span::styled(\n                    format!(\"  {} \", worktree.branch_name),\n                    branch_style.add_modifier(Modifier::BOLD),\n                ),\n                Span::styled(\n                    format!(\"→ {path_display}\"),\n                    Style::default().fg(Color::Gray),\n                ),\n            ]);\n\n            let mut item = ListItem::new(content);\n\n            if is_selected {\n                item = item.style(\n                    Style::default()\n                        .bg(Color::DarkGray)\n                        .add_modifier(Modifier::BOLD),\n                );\n            }\n\n            item\n        })\n        .collect();\n\n    let list = List::new(items).block(\n        Block::default()\n            .borders(Borders::ALL)\n            .title(format!(\"Git Worktrees ({})\", state.worktrees.len()))\n            .border_style(Style::default().fg(Color::DarkGray)),\n    );\n\n    frame.render_widget(list, area);\n}\n\nfn render_status_bar(frame: &mut Frame, area: Rect, state: &WorktreeTabState) {\n    const VERSION_TEXT: &str = \"Chloe v0.1.0\";\n    const VERSION_TEXT_LENGTH: u16 = 13;\n    const MINIMUM_SPACE_FOR_VERSION: u16 = 15;\n\n    let mode_color = match state.mode {\n        WorktreeMode::Normal => Color::Cyan,\n        WorktreeMode::ConfirmDelete { .. } => Color::Red,\n    };\n\n    let mode_text = match state.mode {\n        WorktreeMode::Normal => \"NORMAL\",\n        WorktreeMode::ConfirmDelete { .. } => \"CONFIRM DELETE\",\n    };\n\n    let help_text = if area.width < STATUS_BAR_WIDTH_THRESHOLD {\n        match state.mode {\n            WorktreeMode::Normal => \"jk:navigate  o:open  r:refresh  d:delete\",\n            WorktreeMode::ConfirmDelete { .. } => \"y:yes  n:no\",\n        }\n    } else {\n        match state.mode {\n            WorktreeMode::Normal => {\n                \"↑↓/jk:navigate  o:open  r:refresh  d:delete  Tab:switch-tabs  q:quit\"\n            }\n            WorktreeMode::ConfirmDelete { .. } => \"y:yes  n:no  Esc:cancel\",\n        }\n    };\n\n    const VERSION_TEXT: &str = \"Chloe v0.1.0\";\n    const VERSION_TEXT_LENGTH: u16 = 13;\n    const MINIMUM_SPACE_FOR_VERSION: u16 = 15;\n\n    let inner_area = Block::default().borders(Borders::ALL).inner(area);\n    let should_show_version = inner_area.width >= MINIMUM_SPACE_FOR_VERSION;\n\n    let chunks = Layout::default()\n        .direction(Direction::Horizontal)\n        .constraints([Constraint::Min(0), Constraint::Length(VERSION_TEXT_LENGTH)])\n        .split(inner_area);\n\n    let status = Paragraph::new(Line::from(vec![\n        Span::styled(\n            format!(\"[{mode_text}] \"),\n            Style::default().fg(mode_color).add_modifier(Modifier::BOLD),\n        ),\n        Span::styled(help_text, Style::default().fg(Color::DarkGray)),\n    ]))\n    .block(\n        Block::default()\n            .borders(Borders::ALL)\n            .border_style(Style::default().fg(Color::DarkGray)),\n    );\n\n    frame.render_widget(status, area);\n\n    if should_show_version {\n        let version = Paragraph::new(VERSION_TEXT)\n            .style(Style::default().fg(Color::DarkGray))\n            .alignment(Alignment::Right);\n        frame.render_widget(version, chunks[1]);\n    }\n}\n\nfn render_delete_confirmation(\n    frame: &mut Frame,\n    area: Rect,\n    state: &WorktreeTabState,\n    worktree_index: usize,\n) {\n    const POPUP_WIDTH_PERCENT: u16 = 60;\n    const POPUP_HEIGHT: u16 = 7;\n\n    let popup_area = centered_rect(POPUP_WIDTH_PERCENT, POPUP_HEIGHT, area);\n\n    let Some(worktree) = state.worktrees.get(worktree_index) else {\n        return;\n    };\n\n    let confirmation_text = vec![\n        Line::from(\"\"),\n        Line::from(Span::styled(\n            \"Delete worktree?\",\n            Style::default().fg(Color::Red).add_modifier(Modifier::BOLD),\n        )),\n        Line::from(\"\"),\n        Line::from(Span::styled(\n            format!(\"Branch: {}\", worktree.branch_name),\n            Style::default().fg(Color::Yellow),\n        )),\n        Line::from(Span::styled(\n            format!(\"Path: {}\", worktree.path.display()),\n            Style::default().fg(Color::Gray),\n        )),\n    ];\n\n    let paragraph = Paragraph::new(confirmation_text)\n        .alignment(Alignment::Center)\n        .block(\n            Block::default()\n                .borders(Borders::ALL)\n                .title(\"Confirm Delete\")\n                .style(Style::default().bg(Color::Black)),\n        );\n\n    frame.render_widget(paragraph, popup_area);\n}\n\nfn centered_rect(percent_width: u16, height: u16, area: Rect) -> Rect {\n    let popup_layout = Layout::default()\n        .direction(Direction::Vertical)\n        .constraints([\n            Constraint::Length((area.height.saturating_sub(height)) / 2),\n            Constraint::Length(height),\n            Constraint::Min(0),\n        ])\n        .split(area);\n\n    Layout::default()\n        .direction(Direction::Horizontal)\n        .constraints([\n            Constraint::Percentage((100 - percent_width) / 2),\n            Constraint::Percentage(percent_width),\n            Constraint::Min(0),\n        ])\n        .split(popup_layout[1])[1]\n}\n",
      "replaceAll": false,
      "structuredPatch": [
        {
          "lines": [
            "         }",
            "     };",
            " ",
            "-    const VERSION_TEXT: &str = \"Chloe v0.1.0\";",
            "-    const VERSION_TEXT_LENGTH: u16 = 13;",
            "-    const MINIMUM_SPACE_FOR_VERSION: u16 = 15;",
            "-",
            "     let inner_area = Block::default().borders(Borders::ALL).inner(area);",
            "     let should_show_version = inner_area.width >= MINIMUM_SPACE_FOR_VERSION;",
            " "
          ],
          "newLines": 6,
          "newStart": 133,
          "oldLines": 10,
          "oldStart": 133
        }
      ],
      "userModified": false
    },
    "tool_use_id": "toolu_01TvW7XbB5cS2PnNgeFntPgp",
    "transcript_path": "/Users/kedry/.claude/projects/-Users-kedry-RustroverProjects--chloe-chloe-add-tui-name-and-version-to-footer-right-side/78c1d51b-b2fd-4a00-90b3-0e1b0950a74b.jsonl"
  },
  "timestamp": 1767838223977483000,
  "worktree_id": "3a9bf1c3-b8ff-4fe0-b880-8858ca74a2c4"
}